/*!
* @karasu-themes/blogger-utils v1.4.5
* https://github.com/Karasu-themes/bloggerSection
*
* Copyright Â© 2024 MarceloTLD
* 
* Released under the MIT License
*-----------------------------------------------*/
var bloggerUtils=function(s){"use strict";function h(e){let t={};const r=/data-[\w-]+="([^"]+)"|data-[\w-]+='([^']+)'/g,c=e.match(r);return!c||c.length==0?{}:(c.forEach(o=>{let n=o;n=n.replace(/data-[\w-]+=/g,""),n=n.replace(/^"|"$|^'|'$/g,"");const l=o.match(/data-.+=/g)[0].replace(/data-|=/g,"").replace(/-\w+/g,function(u){const a=u.replace("-","");return a[0].toUpperCase()+a.slice(1)});t[l]=n}),t)}function b(e){return e.replace(/<[^>]*>?/g,"")}function w(e){const t=e.id.$t.match(/post-\d{1,}/g);return t?t[0].replace("post-",""):""}function I(e){const t=e.id.$t.match(/blog-\d{1,}/g);return t?t[0].replace("blog-",""):""}function E(e){return e.title?e.title.$t:"No title"}function y(e){return e.content?e.content.$t:e.summary?e.summary.$t:""}function v(e){let t="";return e.link.forEach(r=>{r.rel=="alternate"&&(t=r.href)}),t}function _(e,t){const r=b(e);return r.length>t?r.substr(0,t)+"...":r}function T(e,t){let r=document.createElement("div");r.innerHTML=e;let c=r.querySelector("img");return c?c.src:t}function L(e,t){return e.media$thumbnail?e.media$thumbnail.url:t}function S(e){return{authorName:e.name?e.name.$t:"Unknown",authorUri:e.uri?e.uri.$t:"#noProfileUrl"}}function k(e){return{datePost:e.published?new Date(e.published.$t).toLocaleDateString():"",postUpdate:e.updated?new Date(e.updated.$t).toLocaleDateString():"",datePostIso8601:e.updated.$t??e.published.$t}}function P(e){return e.category?e.category.map(t=>t.term):[]}function g(e,t={}){const r=y(e),c=T(r,t.defaultImage||"#noImageFounded");return{title:E(e),url:v(e),postID:w(e),blogID:I(e),image:c,thumbnail:L(e,c),body:y(e),summary:_(r,t.summary||96),labels:P(e),...S(e),...k(e),...h(r)}}function $(e){return e=="true"?!0:e=="false"?!1:isNaN(e)?e:Number(e)}function D(e){const t={},r=/\$[a-zA-Z]*{([^}]*)}/g;if(!r.test(e))return{};const c=e.match(r);return c.forEach(o=>{const n=o,l=n.replace(/\$|{(.*)}/g,""),u=n.match(/{(.*)}/g)[0].replace(/{|}/g,"");t[l]=$(u)}),c.length?t:{}}function M(){function e(n,l){return localStorage.setItem(n,l),l}function t(n){const l=localStorage.getItem(n);return l||""}function r(n){return t(n)?(localStorage.removeItem(n),!0):!1}function c(n,l){e(n,l)}function o(){return localStorage.clear()}return{create:e,read:t,remove:r,update:c,clear:o}}function N(){function e(r){return JSON.parse(r)??!1}function t(r){return JSON.stringify(r)??!1}return{decode:e,encode:t}}function A(e,t){return e.replace(/\{(\w+)\}/g,function(r){const c=r.replace(/\{|\}/g,"");return t[c]||""})}function U(e,t){return e.replace(/{if(\.\w+\s)[^]*?\/}/g,function(r){const c=r.match(/if.\w+/)[0].replace("if.","");return t[c]?r.replace(/{if.\w+|\/\}/g,""):""})}function R(e,t){return e.replace(/{else(\.\w+\s)[^]*?\/}/g,function(r){const c=r.match(/else.\w+/)[0].replace("else.","");return t[c]?"":r.replace(/{else.\w+|\/\}/g,"")})}function j(e,t){return e.replace(/\{image(.+)\}/g,function(r){const c=r.replace(/\{image|\(|\)|\}/g,"");return t.thumbnail?t.thumbnail.replace(/s\B\d{2,4}(-?w\d{2,4})?-c/,c):""})}function H(e,t){function r(o,n){return n.some(l=>o.includes(l))}function c(o){const n=o.replace(/\[(.+)\]/g,""),l=o.replace(/include|exclude|remove|\[|\]/g,"").split(",").map(u=>u.trim());return{action:n.trim(),params:l}}return e.replace(/{loop\.(.+\s)[^]*?\/}/g,function(o){let n="";const{action:l,params:u}=/\((.+)\)/.test(o)?c(o.match(/\((.+)\)/)[1]):{},a=o.match(/loop.\w+/)[0].replace("loop.",""),p=o.replace(/{loop\.(.+\s)|\/}/g,"");if(t[a]){const f=t[a];return l=="remove"?f.filter(i=>!u.includes(i)).forEach((i,m)=>{n+=p.replace(/@value/g,i).replace(/@index/g,m+1)}):l=="include"?f.filter(i=>r(i,u)).forEach((i,m)=>{n+=p.replace(/@value/g,i).replace(/@index/g,m+1)}):l=="exclude"?f.filter(i=>!r(i,u)).forEach((i,m)=>{n+=p.replace(/@value/g,i).replace(/@index/g,m+1)}):f.forEach((i,m)=>{n+=p.replace(/@value/g,i).replace(/@index/g,m+1)}),n}else return""})}function d(e,t){let r=A(e,t);return[U,R,H,j].forEach(o=>{r=o(r,t)}),r}function O(e){const t=typeof e;let r="";if(t!=="object")return"";for(const c in e)if(Object.hasOwnProperty.call(e,c)){const o=e[c];r+=`${c}=${o}&`}return"?"+r.slice(0,-1)}function q(e){const{homeURL:t,type:r,label:c,mod:o,params:n}=e,l=document.createElement("script"),u="",a=r||"posts",p=o||"default",f=c?`/${p}/-/${c}`:`/${p}`;return l.src=(t||u)+"/feeds/"+a+f+O(n??{}),l}function C({blogId:e,postId:t,cbName:r}){const c=`https://www.blogger.com/feeds/${e}/posts/default/${t}?alt=json-in-script&callback=${r}`,o=document.createElement("script");return o.src=c,o}function F({blogId:e,cbName:t,label:r,maxResults:c=8}){const o=`https://www.blogger.com/feeds/${e}/posts/default${r?`/-/${r}`:""}?alt=json-in-script&callback=${t}&max-results=${c}`,n=document.createElement("script");return n.src=o,n}function Y(e){const t=document.querySelectorAll(".bs-render-post");t&&[...t].forEach((r,c)=>{const o=document.body,n={...r.dataset},l=`rnderPost${c+1}`,u=r.querySelector(".bs-render"),a=n.postId?C({blogId:e,postId:n.postId,cbName:l}):F({blogId:e,cbName:l,label:n.label??!1,maxResults:n.maxResults});a&&o.appendChild(a),window[l]=function(p){if(r.innerHTML="",!n.postId){const f=p.feed.entry;typeof f<"u"&&f.forEach(i=>{const m=g(i,{});r.innerHTML+=d(u.innerHTML.replace(/data-src/g,"src"),m)})}if(n.postId){const f=g(p.entry,{});r.innerHTML=d(u.innerHTML.replace(/data-src/g,"src"),f)}a.remove()}})}return s.feed=q,s.json=N,s.parser=g,s.parserAttr=h,s.parserConfig=D,s.renderPost=Y,s.storage=M,s.stripTags=b,s.template=d,s.typos=$,s}({});
